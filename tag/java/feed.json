{
    "version": "https://jsonfeed.org/version/1",
    "title": "JAVA • All posts by \"java\" tag",
    "description": "爱编程，爱生活",
    "home_page_url": "http://www.startanew.cn",
    "items": [
        {
            "id": "http://www.startanew.cn/2021/11/27/%E6%8E%A5%E5%85%A5%E6%94%AF%E4%BB%98%E5%AE%9D%E4%B8%8E%E5%BE%AE%E4%BF%A1(%E6%B2%99%E7%AE%B1%E7%8E%AF%E5%A2%83)/",
            "url": "http://www.startanew.cn/2021/11/27/%E6%8E%A5%E5%85%A5%E6%94%AF%E4%BB%98%E5%AE%9D%E4%B8%8E%E5%BE%AE%E4%BF%A1(%E6%B2%99%E7%AE%B1%E7%8E%AF%E5%A2%83)/",
            "title": "接入支付宝与微信(沙箱环境)",
            "date_published": "2021-11-27T09:15:46.000Z",
            "content_html": "<h3 id=\"支付宝沙箱\"><a class=\"markdownIt-Anchor\" href=\"#支付宝沙箱\">#</a> 支付宝沙箱</h3>\n<blockquote>\n<p>沙箱地址 <span class=\"exturl\" data-url=\"aHR0cHM6Ly9vcGVuLmFsaXBheS5jb20vcGxhdGZvcm0vYXBwRGFpbHkuaHRtP3RhYj1hY2NvdW50\">https://open.alipay.com/platform/appDaily.htm?tab=account</span></p>\n</blockquote>\n<ol>\n<li>根据官方教程生成应用公钥 私钥  获取 支付宝公钥</li>\n<li>设置支付宝网关 (沙箱环境的支付宝网关与正式的不同)</li>\n<li>如果 Android 要使用沙箱环境测试 需要安装沙箱钱包，并且设置 sdk 为沙箱环境  <code>EnvUtils.setEnv(EnvUtils.EnvEnum.SANDBOX);</code>  , 设置后即可调起沙箱钱包</li>\n<li>示例代码</li>\n</ol>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@RestController</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Pay</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> String APP_ID = <span class=\"string\">&quot;APP_ID&quot;</span>;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> String APP_PRIVATE_KEY = <span class=\"string\">&quot;APP_PRIVATE_KEY&quot;</span>;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> String CHARSET = <span class=\"string\">&quot;utf-8&quot;</span>;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> String ALIPAY_PUBLIC_KEY = <span class=\"string\">&quot;ALIPAY_PUBLIC_KEY&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@GetMapping(&quot;/&quot;)</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> String <span class=\"title\">pay</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">      <span class=\"comment\">//实例化客户端</span></span><br><span class=\"line\">        AlipayClient alipayClient = <span class=\"keyword\">new</span> DefaultAlipayClient(<span class=\"string\">&quot;https://openapi.alipaydev.com/gateway.do&quot;</span>,</span><br><span class=\"line\">                APP_ID, APP_PRIVATE_KEY,</span><br><span class=\"line\">                <span class=\"string\">&quot;json&quot;</span>,</span><br><span class=\"line\">                CHARSET,</span><br><span class=\"line\">                ALIPAY_PUBLIC_KEY,</span><br><span class=\"line\">                <span class=\"string\">&quot;RSA2&quot;</span>);</span><br><span class=\"line\">        <span class=\"comment\">//实例化具体API对应的request类,类名称和接口名称对应,当前调用接口名称：alipay.trade.app.pay</span></span><br><span class=\"line\">        AlipayTradeAppPayRequest request = <span class=\"keyword\">new</span> AlipayTradeAppPayRequest();</span><br><span class=\"line\">        <span class=\"comment\">//SDK已经封装掉了公共参数，这里只需要传入业务参数。以下方法为sdk的model入参方式(model和biz_content同时存在的情况下取biz_content)。</span></span><br><span class=\"line\">        AlipayTradeAppPayModel model = <span class=\"keyword\">new</span> AlipayTradeAppPayModel();</span><br><span class=\"line\">        model.setBody(<span class=\"string\">&quot;我是测试数据&quot;</span>);</span><br><span class=\"line\">        model.setSubject(<span class=\"string\">&quot;App支付测试Java&quot;</span>);</span><br><span class=\"line\">        model.setOutTradeNo(UUID.randomUUID().toString());</span><br><span class=\"line\">        model.setTimeoutExpress(<span class=\"string\">&quot;30m&quot;</span>);</span><br><span class=\"line\">        model.setTotalAmount(<span class=\"string\">&quot;0.01&quot;</span>);</span><br><span class=\"line\">        model.setProductCode(<span class=\"string\">&quot;QUICK_MSECURITY_PAY&quot;</span>);</span><br><span class=\"line\">        request.setBizModel(model);</span><br><span class=\"line\">        request.setNotifyUrl(<span class=\"string\">&quot;http://www.startanew.cn:2000/notify&quot;</span>);</span><br><span class=\"line\">        <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">            <span class=\"comment\">//这里和普通的接口调用不同，使用的是sdkExecute</span></span><br><span class=\"line\">            AlipayTradeAppPayResponse response = alipayClient.sdkExecute(request);</span><br><span class=\"line\">            System.out.println(response.getBody());<span class=\"comment\">//就是orderString 可以直接给客户端请求，无需再做处理。</span></span><br><span class=\"line\">            <span class=\"keyword\">return</span> response.getBody();</span><br><span class=\"line\">        &#125; <span class=\"keyword\">catch</span> (AlipayApiException e) &#123;</span><br><span class=\"line\">            e.printStackTrace();</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"string\">&quot;ok&quot;</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@PostMapping(&quot;/notify&quot;)</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> Object <span class=\"title\">notify</span><span class=\"params\">(HttpServletRequest request)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"comment\">//获取支付宝POST过来反馈信息 </span></span><br><span class=\"line\">        Map&lt;String, String&gt; params = <span class=\"keyword\">new</span> HashMap&lt;String, String&gt;();</span><br><span class=\"line\">        Map requestParams = request.getParameterMap();</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (Iterator iter = requestParams.keySet().iterator(); iter.hasNext(); ) &#123;</span><br><span class=\"line\">            String name = (String) iter.next();</span><br><span class=\"line\">            String[] values = (String[]) requestParams.get(name);</span><br><span class=\"line\">            String valueStr = <span class=\"string\">&quot;&quot;</span>;</span><br><span class=\"line\">            <span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>; i &lt; values.length; i++) &#123;</span><br><span class=\"line\">                valueStr = (i == values.length - <span class=\"number\">1</span>) ? valueStr + values[i] : valueStr + values[i] + <span class=\"string\">&quot;,&quot;</span>;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            <span class=\"comment\">//乱码解决，这段代码在出现乱码时使用。 </span></span><br><span class=\"line\">            <span class=\"comment\">//valueStr = new String(valueStr.getBytes(&quot;ISO-8859-1&quot;), &quot;utf-8&quot;); </span></span><br><span class=\"line\">            params.put(name, valueStr);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"comment\">//切记alipaypublickey是支付宝的公钥，请去open.alipay.com对应应用下查看。 </span></span><br><span class=\"line\">        <span class=\"comment\">//boolean AlipaySignature.rsaCheckV1(Map&lt;String, String&gt; params, String publicKey, String charset, String sign_type)</span></span><br><span class=\"line\">        <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">            <span class=\"keyword\">boolean</span> flag = AlipaySignature.rsaCheckV1(params, ALIPAY_PUBLIC_KEY, CHARSET, <span class=\"string\">&quot;RSA2&quot;</span>);</span><br><span class=\"line\">            <span class=\"keyword\">return</span> flag;</span><br><span class=\"line\">        &#125; <span class=\"keyword\">catch</span> (AlipayApiException e) &#123;</span><br><span class=\"line\">            e.printStackTrace();</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"string\">&quot;ok&quot;</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>注意事项  <code>支付宝的订单是在用户输入正确支付密码后才生成</code></p>\n</blockquote>\n<h3 id=\"微信沙箱需要真实的商户号否则无法使用沙箱环境\"><a class=\"markdownIt-Anchor\" href=\"#微信沙箱需要真实的商户号否则无法使用沙箱环境\">#</a> 微信沙箱 (需要真实的商户号，否则无法使用沙箱环境)</h3>\n<blockquote>\n<p>沙箱地址 <span class=\"exturl\" data-url=\"aHR0cHM6Ly9wYXkud2VpeGluLnFxLmNvbS93aWtpL2RvYy9hcGkvYXBwL2FwcC5waHA/Y2hhcHRlcj0yM18xJmFtcDtpbmRleD0y\">https://pay.weixin.qq.com/wiki/doc/api/app/app.php?chapter=23_1&amp;index=2</span><br>\n 根据真实商户号，真实 API 密钥，获取沙箱密钥 示例代码</p>\n</blockquote>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">#需要导入wxpay-sdk</span><br><span class=\"line\">    &lt;dependency&gt;</span><br><span class=\"line\">        &lt;groupId&gt;com.github.wxpay&lt;/groupId&gt;</span><br><span class=\"line\">        &lt;artifactId&gt;wxpay-sdk&lt;/artifactId&gt;</span><br><span class=\"line\">        &lt;version&gt;0.0.3&lt;/version&gt;</span><br><span class=\"line\">    &lt;/dependency&gt;</span><br><span class=\"line\">    </span><br><span class=\"line\">#获取沙箱密钥</span><br><span class=\"line\"> <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> *</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@param</span> nonce_str 随机字符串(可用 WXPayUtil.generateNonceStr()生成)</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@param</span> mchId   真实商户号</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@param</span> apiKey   真实API密钥</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@return</span></span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@throws</span> Exception</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> String <span class=\"title\">getSignKey</span><span class=\"params\">(String nonce_str, String mchId, String apiKey)</span> <span class=\"keyword\">throws</span> Exception </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">//**获取仿真测试环境验签秘钥API**</span></span><br><span class=\"line\">    URI uri = <span class=\"keyword\">new</span> URI(<span class=\"string\">&quot;https://api.mch.weixin.qq.com/sandboxnew/pay/getsignkey&quot;</span>);</span><br><span class=\"line\">    HttpHeaders headers = <span class=\"keyword\">new</span> HttpHeaders();</span><br><span class=\"line\">    <span class=\"comment\">//**媒体类型`application/xml`**</span></span><br><span class=\"line\">    headers.setContentType(MediaType.APPLICATION_XML);</span><br><span class=\"line\">    Map&lt;String, String&gt; param = <span class=\"keyword\">new</span> HashMap&lt;String, String&gt;();</span><br><span class=\"line\">    <span class=\"comment\">//需要真实商户号</span></span><br><span class=\"line\">    param.put(<span class=\"string\">&quot;mch_id&quot;</span>, mchId);</span><br><span class=\"line\">    <span class=\"comment\">//随机字符</span></span><br><span class=\"line\">    param.put(<span class=\"string\">&quot;nonce_str&quot;</span>, nonce_str);</span><br><span class=\"line\">    <span class=\"comment\">//通过SDK生成签名其中API_KEY为商户对应的真实密钥</span></span><br><span class=\"line\">    String sign = WXPayUtil.generateSignature(param, apiKey);</span><br><span class=\"line\">    param.put(<span class=\"string\">&quot;sign&quot;</span>, sign);</span><br><span class=\"line\">    <span class=\"comment\">//将map转换为xml格式</span></span><br><span class=\"line\">    <span class=\"comment\">//其实请求的是xml格式,非key-value格式**</span></span><br><span class=\"line\">    HttpEntity&lt;String&gt; entity = <span class=\"keyword\">new</span> HttpEntity&lt;String&gt;(WXPayUtil.mapToXml(param), headers);</span><br><span class=\"line\">    RestTemplate rt = <span class=\"keyword\">new</span> RestTemplate();</span><br><span class=\"line\">    String responseXML = rt.postForObject(uri, entity, String.class);</span><br><span class=\"line\">    Map&lt;String, String&gt; xmlToMap = WXPayUtil.xmlToMap(responseXML);</span><br><span class=\"line\">    <span class=\"keyword\">return</span> xmlToMap.get(<span class=\"string\">&quot;sandbox_signkey&quot;</span>);<span class=\"comment\">//这个就是沙箱签名key**</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n<ol start=\"2\">\n<li>使用获取的沙箱密钥替换真实密钥，商户开发者只需将正式 API 的调用 URL 增加一层 sandboxnew 路径，即可对接到仿真系统；</li>\n</ol>\n<h3 id=\"需要注意的地方\"><a class=\"markdownIt-Anchor\" href=\"#需要注意的地方\">#</a> 需要注意的地方</h3>\n<blockquote>\n<p>com.github.wxpay 的沙箱代码 生成的 xml 格式不对，请求总是报 xml 格式错误，所以自己写的 map 转 xml</p>\n</blockquote>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> String <span class=\"title\">mapToXml</span><span class=\"params\">(Map&lt;String, String&gt; map)</span> <span class=\"keyword\">throws</span> Exception </span>&#123;</span><br><span class=\"line\">    String xmlResult = <span class=\"string\">&quot;&quot;</span>;</span><br><span class=\"line\">    StringBuffer sb = <span class=\"keyword\">new</span> StringBuffer();</span><br><span class=\"line\">    sb.append(<span class=\"string\">&quot;&lt;xml&gt;&quot;</span>);</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (String key : map.keySet()) &#123;</span><br><span class=\"line\">        String value = map.get(key);</span><br><span class=\"line\">        sb.append(<span class=\"string\">&quot;&lt;&quot;</span> + key + <span class=\"string\">&quot;&gt;&quot;</span> + value + <span class=\"string\">&quot;&lt;/&quot;</span> + key + <span class=\"string\">&quot;&gt;&quot;</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    sb.append(<span class=\"string\">&quot;&lt;/xml&gt;&quot;</span>);</span><br><span class=\"line\">    xmlResult = sb.toString();</span><br><span class=\"line\">    <span class=\"keyword\">return</span> xmlResult;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//因为com.github.wxpay 封装的请求里面包含了map转xml的代码,所以需要自定义网络请求代码</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span>  String  <span class=\"title\">request</span> <span class=\"params\">(String url,Map&lt;String, String&gt; map)</span> <span class=\"keyword\">throws</span> Exception </span>&#123;</span><br><span class=\"line\">    HttpHeaders headers = <span class=\"keyword\">new</span> HttpHeaders();</span><br><span class=\"line\">    <span class=\"comment\">//媒体类型application/xml</span></span><br><span class=\"line\">    headers.setContentType(MediaType.APPLICATION_XML);</span><br><span class=\"line\">    HttpEntity&lt;String&gt; entity = <span class=\"keyword\">new</span> HttpEntity&lt;String&gt;(WxUtils.mapToXml(map), headers);</span><br><span class=\"line\">    RestTemplate rt = <span class=\"keyword\">new</span> RestTemplate();</span><br><span class=\"line\">    <span class=\"keyword\">return</span>  rt.postForObject(url, entity, String.class);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">//使用示例</span></span><br><span class=\"line\">    WXPay wxPay = <span class=\"keyword\">new</span> WXPay(WXPayConfigImpl.getWXPayConfig(), WXPayConstants.SignType.MD5, <span class=\"keyword\">true</span>);</span><br><span class=\"line\">    HashMap&lt;String, String&gt; hashMap = <span class=\"keyword\">new</span> HashMap&lt;&gt;();</span><br><span class=\"line\">    hashMap.put(<span class=\"string\">&quot;body&quot;</span>, <span class=\"string\">&quot;123ABC&quot;</span>);  <span class=\"comment\">//不能为中文</span></span><br><span class=\"line\">    hashMap.put(<span class=\"string\">&quot;attach&quot;</span>, <span class=\"string\">&quot;123ABC&quot;</span>);  <span class=\"comment\">//不能为中文</span></span><br><span class=\"line\">    hashMap.put(<span class=\"string\">&quot;out_trade_no&quot;</span>,outTradeNo);</span><br><span class=\"line\">    hashMap.put(<span class=\"string\">&quot;total_fee&quot;</span>, <span class=\"string\">&quot;232&quot;</span>);</span><br><span class=\"line\">    hashMap.put(<span class=\"string\">&quot;spbill_create_ip&quot;</span>, <span class=\"string\">&quot;192.168.1.1&quot;</span>);</span><br><span class=\"line\">    hashMap.put(<span class=\"string\">&quot;notify_url&quot;</span>, <span class=\"string\">&quot;http://www.startanew.cn:2000/callback/notify&quot;</span>);</span><br><span class=\"line\">    hashMap.put(<span class=\"string\">&quot;trade_type&quot;</span>, <span class=\"string\">&quot;APP&quot;</span>);</span><br><span class=\"line\">    Map&lt;String, String&gt; data = wxPay.fillRequestData(hashMap);</span><br><span class=\"line\">    String xml = WxUtils.mapToXml(data);</span><br><span class=\"line\">    System.out.println(xml);</span><br><span class=\"line\">    String responseXML = WxUtils.request(WXPayConstants.SANDBOX_UNIFIEDORDER_URL, data);</span><br><span class=\"line\">    System.out.println(responseXML);</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>下单的金额，不能随便设置，需要按照微信的测试用例设置（关注微信公众号 WXPayAssist） 获取验收用例<br>\n经过测试，请求参数中不能带有中文 否则会报 <code>沙箱验证签名失败，请确认沙箱签名key是否正确（通过getsignkey调用生成）</code></p>\n</blockquote>\n",
            "tags": [
                "java"
            ]
        },
        {
            "id": "http://www.startanew.cn/2021/04/01/java-Jni/",
            "url": "http://www.startanew.cn/2021/04/01/java-Jni/",
            "title": "Jni",
            "date_published": "2021-04-01T12:24:07.000Z",
            "content_html": "<h3 id=\"编写java-代码-native调用本地方法库\"><a class=\"markdownIt-Anchor\" href=\"#编写java-代码-native调用本地方法库\">#</a> 编写 java 代码    native 调用本地方法库</h3>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">HelloMyJni</span></span>&#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">native</span> <span class=\"keyword\">void</span> <span class=\"title\">helloWorld</span><span class=\"params\">()</span></span>;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">native</span> <span class=\"keyword\">void</span> <span class=\"title\">helloWorld2</span><span class=\"params\">(<span class=\"keyword\">int</span> a)</span></span>;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">native</span> <span class=\"keyword\">void</span> <span class=\"title\">helloWorld3</span><span class=\"params\">()</span></span>;</span><br><span class=\"line\">    <span class=\"keyword\">static</span>&#123;</span><br><span class=\"line\">        System.loadLibrary(<span class=\"string\">&quot;hello&quot;</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">main</span><span class=\"params\">(String[] args)</span></span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">new</span> HelloMyJni().helloWorld();</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;==============================================&quot;</span>);</span><br><span class=\"line\">        <span class=\"keyword\">new</span> HelloMyJni().helloWorld2(<span class=\"number\">20</span>);</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&quot;</span>);</span><br><span class=\"line\">        <span class=\"keyword\">new</span> HelloMyJni().helloWorld3();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n<h3 id=\"通过javac-命令编译为class文件\"><a class=\"markdownIt-Anchor\" href=\"#通过javac-命令编译为class文件\">#</a> 通过 javac  命令编译为 class 文件</h3>\n<blockquote>\n<p>出现 gbk 编码错误可以使用  javac -encoding utf-8</p>\n</blockquote>\n<h3 id=\"通过javah-包名类名-把class文件编译为-com_example_demoyml_hellomyjnih\"><a class=\"markdownIt-Anchor\" href=\"#通过javah-包名类名-把class文件编译为-com_example_demoyml_hellomyjnih\">#</a> 通过 javah   包名类名   把 class 文件编译为 com_example_demoyml_HelloMyJni.h</h3>\n<h3 id=\"编写c文件-引入-com_example_demoyml_hellomyjnih\"><a class=\"markdownIt-Anchor\" href=\"#编写c文件-引入-com_example_demoyml_hellomyjnih\">#</a> 编写 c 文件  引入 com_example_demoyml_HelloMyJni.h</h3>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"meta-string\">&quot;jni.h&quot;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"meta-string\">&quot;com_example_demoyml_HelloMyJni.h&quot;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"meta-string\">&lt;stdio.h&gt;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"meta-string\">&lt;stdlib.h&gt;</span></span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\">JNIEXPORT <span class=\"keyword\">void</span> JNICALL <span class=\"title\">Java_com_example_demoyml_HelloMyJni_helloWorld</span><span class=\"params\">(JNIEnv * env, jobject obj)</span></span></span><br><span class=\"line\"><span class=\"function\">        </span>&#123;</span><br><span class=\"line\">          <span class=\"built_in\">printf</span>(<span class=\"string\">&quot;Hello World!\\n&quot;</span>);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\">JNIEXPORT <span class=\"keyword\">void</span> JNICALL <span class=\"title\">Java_com_example_demoyml_HelloMyJni_helloWorld2</span><span class=\"params\">(JNIEnv * env, jobject obj, jint  x)</span></span></span><br><span class=\"line\"><span class=\"function\">        </span>&#123;</span><br><span class=\"line\">          <span class=\"built_in\">printf</span>(<span class=\"string\">&quot;参数:  %d\\n&quot;</span>, x);</span><br><span class=\"line\">          <span class=\"built_in\">printf</span>(<span class=\"string\">&quot;================》c结束《=======================\\n&quot;</span>);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\">JNIEXPORT <span class=\"keyword\">void</span> JNICALL <span class=\"title\">Java_com_example_demoyml_HelloMyJni_helloWorld3</span><span class=\"params\">(JNIEnv * a, jobject b)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">      <span class=\"built_in\">printf</span>(<span class=\"string\">&quot;d\\n&quot;</span>);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h3 id=\"使用命令生成dll文件\"><a class=\"markdownIt-Anchor\" href=\"#使用命令生成dll文件\">#</a> 使用命令生成 dll 文件</h3>\n<blockquote>\n<p>gcc -I java 目录 \\include -I java 目录 \\include\\win32 -shared -Wl,-kill-at -s -o hello.dll  c 文件</p>\n</blockquote>\n<h3 id=\"java调用\"><a class=\"markdownIt-Anchor\" href=\"#java调用\">#</a> java 调用</h3>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">System.loadLibrary(<span class=\"string\">&quot;hello&quot;</span>); </span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n",
            "tags": [
                "java"
            ]
        },
        {
            "id": "http://www.startanew.cn/2020/10/22/CompletableFuture-%E5%BC%82%E6%AD%A5%E4%BB%BB%E5%8A%A1/",
            "url": "http://www.startanew.cn/2020/10/22/CompletableFuture-%E5%BC%82%E6%AD%A5%E4%BB%BB%E5%8A%A1/",
            "title": "CompletableFuture  异步任务",
            "date_published": "2020-10-22T12:29:40.000Z",
            "content_html": "<h3 id=\"异步任务学习笔记\"><a class=\"markdownIt-Anchor\" href=\"#异步任务学习笔记\">#</a> 异步任务学习笔记</h3>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">@SpringBootTest</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Demo3ApplicationTests</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Test</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">contextLoads</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        run();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title\">run</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        CompletableFuture&lt;Void&gt; f1 = CompletableFuture.runAsync(() -&gt; &#123;</span><br><span class=\"line\">            <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">                Thread.sleep(<span class=\"number\">3000</span>);</span><br><span class=\"line\">            &#125; <span class=\"keyword\">catch</span> (InterruptedException e) &#123;</span><br><span class=\"line\">                e.printStackTrace();</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            System.out.println(<span class=\"string\">&quot;第一个异步任务&quot;</span>);</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">        CompletableFuture&lt;Void&gt; f2 = CompletableFuture.runAsync(() -&gt; &#123;</span><br><span class=\"line\">            <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">                Thread.sleep(<span class=\"number\">2000</span>);</span><br><span class=\"line\">            &#125; <span class=\"keyword\">catch</span> (InterruptedException e) &#123;</span><br><span class=\"line\">                e.printStackTrace();</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            System.out.println(<span class=\"string\">&quot;第二个异步任务&quot;</span>);</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">        CompletableFuture.allOf(f1, f2).join();</span><br><span class=\"line\"></span><br><span class=\"line\">        f2.whenComplete(((aVoid, throwable) -&gt; &#123;</span><br><span class=\"line\">            System.out.println(<span class=\"string\">&quot;void f2&quot;</span> + aVoid);</span><br><span class=\"line\">        &#125;));</span><br><span class=\"line\"></span><br><span class=\"line\">        f1.whenComplete(((aVoid, throwable) -&gt; &#123;</span><br><span class=\"line\">            System.out.println(<span class=\"string\">&quot;void f1&quot;</span> + aVoid);</span><br><span class=\"line\">        &#125;));</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;CompletableFuture Test runAsync&quot;</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n<h3 id=\"consumer用法\"><a class=\"markdownIt-Anchor\" href=\"#consumer用法\">#</a> Consumer 用法</h3>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Foo</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> Integer first;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> Integer <span class=\"title\">getFirst</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> first;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">setFirst</span><span class=\"params\">(Integer first)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.first = first;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">main</span><span class=\"params\">(String[] args)</span> </span>&#123;</span><br><span class=\"line\">    Foo f = <span class=\"keyword\">new</span> Foo();</span><br><span class=\"line\">    Consumer&lt;Foo&gt; consumer_fun = foo-&gt;foo.setFirst(<span class=\"number\">1</span>);</span><br><span class=\"line\">    consumer_fun.accept(f);</span><br><span class=\"line\">    System.out.println(f.getFirst());</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>",
            "tags": [
                "java"
            ]
        },
        {
            "id": "http://www.startanew.cn/2020/10/15/java-%E6%B1%89%E5%AD%97%E8%BD%AC%E6%8B%BC%E9%9F%B3/",
            "url": "http://www.startanew.cn/2020/10/15/java-%E6%B1%89%E5%AD%97%E8%BD%AC%E6%8B%BC%E9%9F%B3/",
            "title": "java 汉字转拼音",
            "date_published": "2020-10-15T13:55:00.000Z",
            "content_html": "<h3 id=\"pom文件\"><a class=\"markdownIt-Anchor\" href=\"#pom文件\">#</a> pom 文件</h3>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;dependency&gt;</span><br><span class=\"line\">        &lt;groupId&gt;com.belerweb&lt;&#x2F;groupId&gt;</span><br><span class=\"line\">        &lt;artifactId&gt;pinyin4j&lt;&#x2F;artifactId&gt;</span><br><span class=\"line\">        &lt;version&gt;2.5.1&lt;&#x2F;version&gt;</span><br><span class=\"line\">&lt;&#x2F;dependency&gt;</span><br></pre></td></tr></table></figure>\n<h3 id=\"代码\"><a class=\"markdownIt-Anchor\" href=\"#代码\">#</a> 代码</h3>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">public static String getFullSpell(String chinese) &#123;</span><br><span class=\"line\">    &#x2F;&#x2F; 用StringBuffer（字符串缓冲）来接收处理的数据</span><br><span class=\"line\">    StringBuffer sb &#x3D; new StringBuffer();</span><br><span class=\"line\">    &#x2F;&#x2F;字符串转换字节数组</span><br><span class=\"line\">    char[] arr &#x3D; chinese.toCharArray();</span><br><span class=\"line\">    HanyuPinyinOutputFormat defaultFormat &#x3D; new HanyuPinyinOutputFormat();</span><br><span class=\"line\">    &#x2F;&#x2F;转换类型（大写or小写）</span><br><span class=\"line\">    defaultFormat.setCaseType(HanyuPinyinCaseType.LOWERCASE);</span><br><span class=\"line\">    &#x2F;&#x2F;定义中文声调的输出格式</span><br><span class=\"line\">    defaultFormat.setToneType(HanyuPinyinToneType.WITHOUT_TONE);</span><br><span class=\"line\">    &#x2F;&#x2F;定义字符的输出格式</span><br><span class=\"line\">    defaultFormat.setVCharType(HanyuPinyinVCharType.WITH_U_AND_COLON);</span><br><span class=\"line\">    for (int i &#x3D; 0; i &lt; arr.length; i++) &#123;</span><br><span class=\"line\">        &#x2F;&#x2F;判断是否是汉子字符</span><br><span class=\"line\">        if (arr[i] &gt; 128) &#123;</span><br><span class=\"line\">            try &#123;</span><br><span class=\"line\">                sb.append(capitalize(PinyinHelper.toHanyuPinyinStringArray(arr[i], defaultFormat)[0]));</span><br><span class=\"line\">            &#125; catch (BadHanyuPinyinOutputFormatCombination e) &#123;</span><br><span class=\"line\">                e.printStackTrace();</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125; else &#123;</span><br><span class=\"line\">            &#x2F;&#x2F; 如果不是汉字字符，直接拼接</span><br><span class=\"line\">            sb.append(arr[i]);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    return sb.toString();</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">&#x2F;**</span><br><span class=\"line\"> * 首字母大写</span><br><span class=\"line\"> * @param str</span><br><span class=\"line\"> * @return</span><br><span class=\"line\"> *&#x2F;</span><br><span class=\"line\">public static String capitalize(String str) &#123;</span><br><span class=\"line\">    char ch[];</span><br><span class=\"line\">    ch &#x3D; str.toCharArray();</span><br><span class=\"line\">    if (ch[0] &gt;&#x3D; &#39;a&#39; &amp;&amp; ch[0] &lt;&#x3D; &#39;z&#39;) &#123;</span><br><span class=\"line\">        ch[0] &#x3D; (char) (ch[0] - 32);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    String newString &#x3D; new String(ch);</span><br><span class=\"line\">    return newString;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>",
            "tags": [
                "java"
            ]
        },
        {
            "id": "http://www.startanew.cn/2020/07/13/%E6%A0%BC%E6%9E%97%E5%A8%81%E6%B2%BB%E6%97%B6%E9%97%B4%E8%BD%AC%E6%97%B6%E9%97%B4%E6%88%B3/",
            "url": "http://www.startanew.cn/2020/07/13/%E6%A0%BC%E6%9E%97%E5%A8%81%E6%B2%BB%E6%97%B6%E9%97%B4%E8%BD%AC%E6%97%B6%E9%97%B4%E6%88%B3/",
            "title": "格林威治时间转时间戳",
            "date_published": "2020-07-13T06:53:00.000Z",
            "content_html": "<h5 id=\"示例jul-24-2019-30046-pm\"><a class=\"markdownIt-Anchor\" href=\"#示例jul-24-2019-30046-pm\">#</a> 示例：Jul 24, 2019 3:00:46 PM</h5>\n<h5 id=\"示例代码\"><a class=\"markdownIt-Anchor\" href=\"#示例代码\">#</a> 示例代码:</h5>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">String str=<span class=\"string\">&quot;Jul 24, 2019 3:00:46 PM&quot;</span>;</span><br><span class=\"line\">SimpleDateFormat format=<span class=\"keyword\">new</span> SimpleDateFormat(<span class=\"string\">&quot;MMM dd, yyyy hh:mm:ss aa&quot;</span>, Locale.ENGLISH);</span><br><span class=\"line\"><span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">    System.out.println(format.format(<span class=\"keyword\">new</span> Date()));</span><br><span class=\"line\">    System.out.println(format.format(format.parse(str)));</span><br><span class=\"line\">&#125; <span class=\"keyword\">catch</span> (Exception e) &#123;</span><br><span class=\"line\">    e.printStackTrace();</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>",
            "tags": [
                "java"
            ]
        },
        {
            "id": "http://www.startanew.cn/2020/07/12/maven%E6%89%93%E5%8C%85jar/",
            "url": "http://www.startanew.cn/2020/07/12/maven%E6%89%93%E5%8C%85jar/",
            "title": "maven打包jar",
            "date_published": "2020-07-12T15:32:00.000Z",
            "content_html": "<h6 id=\"添加插件\"><a class=\"markdownIt-Anchor\" href=\"#添加插件\">#</a> 添加插件</h6>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;plugin&gt;</span><br><span class=\"line\">   &lt;artifactId&gt;maven-assembly-plugin&lt;&#x2F;artifactId&gt;</span><br><span class=\"line\">   &lt;configuration&gt;</span><br><span class=\"line\">      &lt;appendAssemblyId&gt;false&lt;&#x2F;appendAssemblyId&gt;</span><br><span class=\"line\">      &lt;descriptorRefs&gt;</span><br><span class=\"line\">         &lt;descriptorRef&gt;jar-with-dependencies&lt;&#x2F;descriptorRef&gt;</span><br><span class=\"line\">      &lt;&#x2F;descriptorRefs&gt;</span><br><span class=\"line\">      &lt;archive&gt;</span><br><span class=\"line\">         &lt;manifest&gt;</span><br><span class=\"line\">            &lt;mainClass&gt;webrtc.WebrtcServer&lt;&#x2F;mainClass&gt;</span><br><span class=\"line\">         &lt;&#x2F;manifest&gt;</span><br><span class=\"line\">      &lt;&#x2F;archive&gt;</span><br><span class=\"line\">   &lt;&#x2F;configuration&gt;</span><br><span class=\"line\">   &lt;executions&gt;</span><br><span class=\"line\">      &lt;execution&gt;</span><br><span class=\"line\">         &lt;id&gt;make-assembly&lt;&#x2F;id&gt;</span><br><span class=\"line\">         &lt;phase&gt;package&lt;&#x2F;phase&gt;</span><br><span class=\"line\">         &lt;goals&gt;</span><br><span class=\"line\">            &lt;goal&gt;assembly&lt;&#x2F;goal&gt;</span><br><span class=\"line\">         &lt;&#x2F;goals&gt;</span><br><span class=\"line\">      &lt;&#x2F;execution&gt;</span><br><span class=\"line\">   &lt;&#x2F;executions&gt;</span><br><span class=\"line\">&lt;&#x2F;plugin&gt;</span><br></pre></td></tr></table></figure>\n<a id=\"more\"></a> \n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;mainClass&gt;RunJob&lt;&#x2F;mainClass&gt;填写含有Main的class名</span><br></pre></td></tr></table></figure>\n<h6 id=\"运行命令\"><a class=\"markdownIt-Anchor\" href=\"#运行命令\">#</a> 运行命令</h6>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mvn -Dmaven.test.skip&#x3D;true  assembly:assembly</span><br></pre></td></tr></table></figure>\n<p>使用以下命令运行 jar，参数依次跟在后面，如果有的话:</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">java -jar BuildKettleJob-1.0.jar</span><br></pre></td></tr></table></figure>",
            "tags": [
                "java",
                "maven"
            ]
        },
        {
            "id": "http://www.startanew.cn/2020/07/12/HashMap-%E5%92%8C-HashTable-%E7%9A%84%E5%8C%BA%E5%88%AB/",
            "url": "http://www.startanew.cn/2020/07/12/HashMap-%E5%92%8C-HashTable-%E7%9A%84%E5%8C%BA%E5%88%AB/",
            "title": "HashMap 和 HashTable 的区别",
            "date_published": "2020-07-12T15:29:00.000Z",
            "content_html": "<h5 id=\"一-继承不同\"><a class=\"markdownIt-Anchor\" href=\"#一-继承不同\">#</a> 一。继承不同</h5>\n<blockquote>\n<p>hashmap  继承  AbstractMap<br>\nhashtable  继承 Dictionary</p>\n</blockquote>\n<a id=\"more\"></a>  \n<h5 id=\"二-线程安全不同\"><a class=\"markdownIt-Anchor\" href=\"#二-线程安全不同\">#</a> 二。线程安全不同</h5>\n<blockquote>\n<p>hashmap  线程不安全<br>\n hashtable 线程安全</p>\n</blockquote>\n<h5 id=\"三-key值不同\"><a class=\"markdownIt-Anchor\" href=\"#三-key值不同\">#</a> 三 . key 值不同</h5>\n<blockquote>\n<p>hashtable  key 与 value 都不能为空<br>\n hashmap key 可以有一个为空，value 可以多个为空</p>\n</blockquote>\n",
            "tags": [
                "java"
            ]
        }
    ]
}