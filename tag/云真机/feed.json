{
    "version": "https://jsonfeed.org/version/1",
    "title": "JAVA • All posts by \"云真机\" tag",
    "description": "爱编程，爱生活",
    "home_page_url": "http://www.startanew.cn",
    "items": [
        {
            "id": "http://www.startanew.cn/2021/11/27/%E4%BA%91%E7%9C%9F%E6%9C%BA%E5%B9%B3%E5%8F%B0%E6%90%AD%E5%BB%BA/",
            "url": "http://www.startanew.cn/2021/11/27/%E4%BA%91%E7%9C%9F%E6%9C%BA%E5%B9%B3%E5%8F%B0%E6%90%AD%E5%BB%BA/",
            "title": "云真机平台搭建",
            "date_published": "2021-11-27T08:40:09.000Z",
            "content_html": "<h3 id=\"准备所需镜像\"><a class=\"markdownIt-Anchor\" href=\"#准备所需镜像\">#</a> 准备所需镜像</h3>\n<p><span class=\"exturl\" data-url=\"aHR0cHM6Ly9naXRodWIuY29tL0RldmljZUZhcm1lci9zdGY=\">官方地址</span><br>\n<span class=\"exturl\" data-url=\"aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM3NDk3NzU4L2FydGljbGUvZGV0YWlscy8xMDk0OTIzNTg=\">参考博客</span></p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker pull devicefarmer/stf</span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> Android adb镜像</span></span><br><span class=\"line\">docker pull sorccu/adb:latest</span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> rethinkdb镜像</span></span><br><span class=\"line\">docker pull rethinkdb:latest</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>启动容器</p>\n</blockquote>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 1.启动 rethinkdb数据库</span></span><br><span class=\"line\">docker run -d --name rethinkdb -v /rethinkdb:/data --net host rethinkdb rethinkdb --bind all --cache-size 8192 --http-port 8090</span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 2.启动adb service</span></span><br><span class=\"line\">docker run -d --name adbd --privileged -v /dev/bus/usb:/dev/bus/usb --net host sorccu/adb:latest</span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 3.启动stf</span></span><br><span class=\"line\">docker run -d --name stf --net host devicefarmer/stf  stf local --public-ip 主机ip --allow-remote</span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>将安卓手机连接到主机，打开开发者模式，开启 usb 调试<br>\n访问 stf 服务  主机 ip:7100 效果如下:</p>\n</blockquote>\n<center>\n <img data-src=\"http://image.startanew.cn/20211127165150.jpg\" >\n</center>  \n<center>\n <img data-src=\"http://image.startanew.cn/20211127165237.jpg\" >\n</center>   \n<center>\n <img data-src=\"http://image.startanew.cn/20211127165409.jpg\" >\n</center>   \n<blockquote>\n<p>如果安卓设备连接到其他主机，需要在其他主机开启 adb 服务，并且 sft 服务需要指定其他主机 adb 服务的地址已经端口<br>\n开启 adb 服务命令</p>\n</blockquote>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> Windowds</span></span><br><span class=\"line\"><span class=\"meta\"> #</span><span class=\"bash\"> adb -v ==&gt;&gt; 1.0.32，</span></span><br><span class=\"line\"> adb nodaemon server -a -P 5037</span><br><span class=\"line\"><span class=\"meta\"> #</span><span class=\"bash\"> adb -v &lt;&lt;== 1.0.32，</span></span><br><span class=\"line\"> adb -a -P 5037 fork-server server</span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> Linux</span></span><br><span class=\"line\"> adb -a -P 5037 fork-server server </span><br></pre></td></tr></table></figure>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 其它主机上没有安装stf</span></span><br><span class=\"line\">docker run -d --name stf --privileged=true --net host devicefarmer/stf  stf local --public-ip stf主机ip --adb-host adb服务ip --adb-port adb服务端口 --allow-remote</span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 其它主机上安装stf（在其他主机上执行）</span></span><br><span class=\"line\">docker run -d --name stf --privileged=true --net host devicefarmer/stf   --connect-sub tcp://主stf主机ip:7114 --connect-push tcp://主stf主机ip:7116 --group-timeout 20000 --public-ip 主stf主机ip --storage-url http://主stf主机ip:7100/ --vnc-initial-size 600x800 --allow-remote</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n",
            "tags": [
                "云真机"
            ]
        }
    ]
}